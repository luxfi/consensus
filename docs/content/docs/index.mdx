---
title: Introduction
description: Quasar consensus engine with post-quantum finality for Lux blockchain
---

# Lux Consensus

Quasar is the unified consensus engine for the Lux blockchain, combining classical BLS signature aggregation with post-quantum lattice cryptography to deliver 2-round finality with both classical and quantum security.

## Features

- **Unified Protocol**: Same engine for DAG, linear, EVM, and MPC chains
- **Quantum Finality**: Every block requires post-quantum certificates
- **2-Round Finality**: BLS signatures + lattice signatures = quantum finality
- **Zero Leaders**: Fully decentralized, leaderless consensus
- **Sub-Second Performance**: Less than 1 second finality with quantum security
- **Multi-Language SDKs**: Go, C, Rust, and Python implementations

## Quick Start

### Installation

```go
go get github.com/luxfi/consensus@latest
```

### Basic Usage

```go
package main

import (
    "context"
    "github.com/luxfi/consensus"
)

func main() {
    // Create chain with default config
    chain := consensus.NewChain(consensus.DefaultConfig())

    // Start the chain
    ctx := context.Background()
    if err := chain.Start(ctx); err != nil {
        panic(err)
    }
    defer chain.Stop()

    // Add a block
    block := &consensus.Block{
        ID:       consensus.NewID(),
        ParentID: consensus.GenesisID,
        Height:   1,
        Payload:  []byte("Hello, Lux!"),
    }
    if err := chain.Add(ctx, block); err != nil {
        panic(err)
    }
}
```

## Architecture

### Core Components

```text
consensus/
├── photon/                # K-of-N committee selection
│   ├── emitter.go        # Light emission-based peer selection
│   └── luminance.go      # Node brightness tracking (lux units)
│
├── core/
│   ├── wave/             # Wave consensus mechanism
│   │   └── engine.go     # Threshold voting
│   ├── dag/              # DAG structure & ordering
│   │   ├── flare/        # Certificate generation
│   │   └── horizon/      # Frontier management
│   └── focus/            # Confidence tracking
│
├── protocol/
│   ├── quasar/           # Post-quantum security
│   │   └── ringtail.go   # Quantum-resistant signatures
│   ├── nebula/           # State sync protocol
│   └── nova/             # Parallel chain support
│
├── qzmq/                 # Post-quantum transport
│   ├── session.go        # Hybrid key exchange
│   └── messages.go       # Wire protocol
│
└── engine/               # Consensus engines
    ├── chain/            # Linear blockchain
    └── dag/              # DAG-based chains
```

### Quasar Consensus

Quasar is built on two core components that provide both classical and quantum finality:

#### Nova DAG (Classical Finality)
- **Sampling**: k-peer sampling for vote collection
- **Confidence**: Build confidence through repeated sampling
- **Thresholds**: Beta-1 for early preference, Beta-2 for decision
- **Time**: 600-700ms to classical finality

#### Quasar (Quantum Finality)
- **Phase I - Propose**: Sample DAG frontier, propose highest confidence
- **Phase II - Commit**: Aggregate threshold signatures if quorum agrees
- **Certificates**: Lattice-based post-quantum certificates
- **Time**: 200-300ms additional for quantum finality

## Performance

### Consensus Metrics

| Network | Validators | Finality | Block Time |
|---------|-----------|----------|------------|
| Mainnet | 21 | 9.63s | 200ms |
| Testnet | 11 | 6.3s | 100ms |
| Local | 5 | 3.69s | 10ms |
| X-Chain | 5 | 5ms | 1ms |

### Benchmark Results

| Component | Operation | Time/Op | Memory |
|-----------|-----------|---------|--------|
| Wave Consensus | Vote Round | 3.38us | 2.3KB |
| Photon Emitter | K-of-N Selection | 3.03us | 3.0KB |
| Luminance | Brightness Update | 72ns | 0B |
| Quasar Phase I | Propose | 0.33ns | 0B |
| Quasar Phase II | Commit | 40.7ns | 0B |

## Security Model

1. **Pre-quantum**: Attacker must corrupt at least 1/3 stake to fork
2. **Q-day (BLS broken)**: Attacker can forge BLS but not lattice - block fails quantum check
3. **Post-quantum**: Security rests on lattice SVP (2^160 operations)

Attack window is limited to PQ round time (50ms on mainnet).

## Next Steps

- [Quasar Protocol](/docs/quasar) - Deep dive into quantum finality
- [Wave Consensus](/docs/wave) - Classical consensus mechanism
- [Photon Selection](/docs/photon) - Committee selection algorithm
- [Configuration](/docs/configuration) - Parameter tuning guide
- [API Reference](/docs/api) - Complete API documentation
